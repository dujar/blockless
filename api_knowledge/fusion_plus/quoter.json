{
  "openapi": "3.0.0",
  "paths": {
    "/v1.0/quote/receive": {
      "get": {
        "operationId": "QuoterController_getQuote",
        "summary": "Get quote details based on input data",
        "parameters": [
          {
            "name": "srcChain",
            "required": true,
            "in": "query",
            "description": "Id of source chain",
            "example": "1",
            "schema": { "type": "number" }
          },
          {
            "name": "dstChain",
            "required": true,
            "in": "query",
            "description": "Id of destination chain",
            "example": "137",
            "schema": { "type": "number" }
          },
          {
            "name": "srcTokenAddress",
            "required": true,
            "in": "query",
            "description": "Address of \"SOURCE\" token in source chain",
            "example": "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
            "schema": { "type": "string" }
          },
          {
            "name": "dstTokenAddress",
            "required": true,
            "in": "query",
            "description": "Address of \"DESTINATION\" token in destination chain",
            "example": "0x2791bca1f2de4661ed88a30c99a7a9449aa84174",
            "schema": { "type": "string" }
          },
          {
            "name": "amount",
            "required": true,
            "in": "query",
            "description": "Amount to take from \"SOURCE\" token to get \"DESTINATION\" token",
            "example": "100000000000000000",
            "schema": { "type": "number" }
          },
          {
            "name": "walletAddress",
            "required": true,
            "in": "query",
            "description": "An address of the wallet or contract in source chain who will create Fusion order",
            "example": "0x0000000000000000000000000000000000000000",
            "schema": { "type": "string" }
          },
          {
            "name": "enableEstimate",
            "required": true,
            "in": "query",
            "description": "if enabled then get estimation from 1inch swap builder and generates quoteId, by default is false",
            "example": "false",
            "schema": { "type": "boolean" }
          },
          {
            "name": "fee",
            "required": false,
            "in": "query",
            "description": "fee in bps format, 1% is equal to 100bps",
            "example": "0",
            "schema": { "type": "number" }
          },
          {
            "name": "isPermit2",
            "required": false,
            "in": "query",
            "description": "permit2 allowance transfer encoded call",
            "schema": { "type": "string" }
          },
          {
            "name": "permit",
            "required": false,
            "in": "query",
            "description": "permit, user approval sign",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Returns quote" },
          "400": { "description": "Input data is invalid" },
          "default": {
            "description": "",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/GetQuoteOutput" } } }
          }
        }
      },
      "post": {
        "operationId": "QuoterController_getQuoteWithCustomPresets",
        "summary": "Get quote with custom preset details",
        "parameters": [
          {
            "name": "srcChain",
            "required": true,
            "in": "query",
            "description": "Id of source chain",
            "example": "1",
            "schema": { "type": "number" }
          },
          {
            "name": "dstChain",
            "required": true,
            "in": "query",
            "description": "Id of destination chain",
            "example": "137",
            "schema": { "type": "number" }
          },
          {
            "name": "srcTokenAddress",
            "required": true,
            "in": "query",
            "description": "Address of \"SOURCE\" token",
            "example": "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
            "schema": { "type": "string" }
          },
          {
            "name": "dstTokenAddress",
            "required": true,
            "in": "query",
            "description": "Address of \"DESTINATION\" token",
            "example": "0x2791bca1f2de4661ed88a30c99a7a9449aa84174",
            "schema": { "type": "string" }
          },
          {
            "name": "amount",
            "required": true,
            "in": "query",
            "description": "Amount to take from \"SOURCE\" token to get \"DESTINATION\" token",
            "example": "100000000000000000",
            "schema": { "type": "number" }
          },
          {
            "name": "walletAddress",
            "required": true,
            "in": "query",
            "description": "An address of the wallet or contract who will create Fusion order",
            "example": "0x0000000000000000000000000000000000000000",
            "schema": { "type": "string" }
          },
          {
            "name": "enableEstimate",
            "required": true,
            "in": "query",
            "description": "if enabled then get estimation from 1inch swap builder and generates quoteId, by default is false",
            "example": "false",
            "schema": { "type": "boolean" }
          },
          {
            "name": "fee",
            "required": false,
            "in": "query",
            "description": "fee in bps format, 1% is equal to 100bps",
            "example": "0",
            "schema": { "type": "number" }
          },
          {
            "name": "isPermit2",
            "required": false,
            "in": "query",
            "description": "permit2 allowance transfer encoded call",
            "schema": { "type": "string" }
          },
          {
            "name": "permit",
            "required": false,
            "in": "query",
            "description": "permit, user approval sign",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CustomPresetParams" } } }
        },
        "responses": {
          "200": { "description": "Returns slippage, quoteId and presets with custom preset details as well" },
          "400": { "description": "Input data is invalid" },
          "default": {
            "description": "",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/GetQuoteOutput" } } }
          }
        }
      }
    },
    "/v1.0/quote/build": {
      "post": {
        "operationId": "QuoterController_buildQuoteTypedData",
        "summary": "Build order by given quote",
        "parameters": [
          {
            "name": "srcChain",
            "required": true,
            "in": "query",
            "description": "Id of source chain",
            "example": "1",
            "schema": { "type": "number" }
          },
          {
            "name": "dstChain",
            "required": true,
            "in": "query",
            "description": "Id of destination chain",
            "example": "137",
            "schema": { "type": "number" }
          },
          {
            "name": "srcTokenAddress",
            "required": true,
            "in": "query",
            "description": "Address of \"SOURCE\" token",
            "example": "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
            "schema": { "type": "string" }
          },
          {
            "name": "dstTokenAddress",
            "required": true,
            "in": "query",
            "description": "Address of \"DESTINATION\" token",
            "example": "0x2791bca1f2de4661ed88a30c99a7a9449aa84174",
            "schema": { "type": "string" }
          },
          {
            "name": "amount",
            "required": true,
            "in": "query",
            "description": "Amount to take from \"SOURCE\" token to get \"DESTINATION\" token",
            "example": "100000000000000000",
            "schema": { "type": "number" }
          },
          {
            "name": "walletAddress",
            "required": true,
            "in": "query",
            "description": "An address of the wallet or contract who will create Fusion order",
            "example": "0x0000000000000000000000000000000000000000",
            "schema": { "type": "string" }
          },
          {
            "name": "fee",
            "required": false,
            "in": "query",
            "description": "fee in bps format, 1% is equal to 100bps",
            "example": "0",
            "schema": { "type": "number" }
          },
          {
            "name": "source",
            "required": false,
            "in": "query",
            "description": "Frontend or some other source selector",
            "example": "Frontend",
            "schema": { "type": "string" }
          },
          {
            "name": "isPermit2",
            "required": false,
            "in": "query",
            "description": "permit2 allowance transfer encoded call",
            "schema": { "type": "string" }
          },
          {
            "name": "isMobile",
            "required": false,
            "in": "query",
            "description": "Enabled flag allows to save quote for Mobile History",
            "schema": { "type": "string" }
          },
          {
            "name": "feeReceiver",
            "required": false,
            "in": "query",
            "description": "In case fee non zero -> the fee will be transferred to this address",
            "schema": { "type": "string" }
          },
          {
            "name": "permit",
            "required": false,
            "in": "query",
            "description": "permit, user approval sign",
            "schema": { "type": "string" }
          },
          {
            "name": "preset",
            "required": false,
            "in": "query",
            "description": "fast/medium/slow/custom",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/BuildOrderBody" } } }
        },
        "responses": {
          "200": { "description": "Returns cross chain order details" },
          "400": { "description": "Input data is invalid" },
          "default": {
            "description": "",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/BuildOrderOutput" } } }
          }
        }
      }
    }
  },
  "info": {
    "title": "1inch Fusion+ Quoter API",
    "description": "Quoter API provides the access to Fusion+ price curves",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [{ "url": "/quoter" }],
  "components": {
    "schemas": {
      "AuctionPoint": {
        "type": "object",
        "properties": { "delay": { "type": "number" }, "coefficient": { "type": "number" } },
        "required": ["delay", "coefficient"]
      },
      "GasCostConfig": {
        "type": "object",
        "properties": { "gasBumpEstimate": { "type": "number" }, "gasPriceEstimate": { "type": "string" } },
        "required": ["gasBumpEstimate", "gasPriceEstimate"]
      },
      "Preset": {
        "type": "object",
        "properties": {
          "auctionDuration": { "type": "number" },
          "startAuctionIn": { "type": "number" },
          "initialRateBump": { "type": "number" },
          "auctionStartAmount": { "type": "string" },
          "startAmount": { "type": "string", "description": "auction start amount taking into account gas bump" },
          "auctionEndAmount": { "type": "string" },
          "exclusiveResolver": { "type": "object" },
          "costInDstToken": { "type": "string" },
          "points": { "type": "array", "items": { "$ref": "#/components/schemas/AuctionPoint" } },
          "allowPartialFills": { "type": "boolean" },
          "allowMultipleFills": { "type": "boolean" },
          "gasCost": { "$ref": "#/components/schemas/GasCostConfig" },
          "secretsCount": { "type": "number" }
        },
        "required": [
          "auctionDuration",
          "startAuctionIn",
          "initialRateBump",
          "auctionStartAmount",
          "startAmount",
          "auctionEndAmount",
          "exclusiveResolver",
          "costInDstToken",
          "points",
          "allowPartialFills",
          "allowMultipleFills",
          "gasCost",
          "secretsCount"
        ]
      },
      "QuotePresets": {
        "type": "object",
        "properties": {
          "fast": { "description": "Fast preset type", "allOf": [{ "$ref": "#/components/schemas/Preset" }] },
          "medium": { "description": "Medium preset type", "allOf": [{ "$ref": "#/components/schemas/Preset" }] },
          "slow": { "description": "Slow preset type", "allOf": [{ "$ref": "#/components/schemas/Preset" }] },
          "custom": { "description": "Custom preset type", "allOf": [{ "$ref": "#/components/schemas/Preset" }] }
        },
        "required": ["fast", "medium", "slow"]
      },
      "TimeLocks": {
        "type": "object",
        "properties": {
          "srcWithdrawal": { "type": "number" },
          "srcPublicWithdrawal": { "type": "number" },
          "srcCancellation": { "type": "number" },
          "srcPublicCancellation": { "type": "number" },
          "dstWithdrawal": { "type": "number" },
          "dstPublicWithdrawal": { "type": "number" },
          "dstCancellation": { "type": "number" }
        },
        "required": [
          "srcWithdrawal",
          "srcPublicWithdrawal",
          "srcCancellation",
          "srcPublicCancellation",
          "dstWithdrawal",
          "dstPublicWithdrawal",
          "dstCancellation"
        ]
      },
      "TokenPair": {
        "type": "object",
        "properties": { "srcToken": { "type": "string" }, "dstToken": { "type": "string" } },
        "required": ["srcToken", "dstToken"]
      },
      "PairCurrency": {
        "type": "object",
        "properties": { "usd": { "$ref": "#/components/schemas/TokenPair" } },
        "required": ["usd"]
      },
      "GetQuoteOutput": {
        "type": "object",
        "properties": {
          "quoteId": { "type": "object", "description": "Current generated quote id, should be passed with order" },
          "srcTokenAmount": { "type": "string" },
          "dstTokenAmount": { "type": "string" },
          "presets": {
            "description": "Various preset types which user can choose when using Fusion",
            "allOf": [{ "$ref": "#/components/schemas/QuotePresets" }]
          },
          "srcEscrowFactory": { "type": "string", "description": "Escrow factory contract address at source chain" },
          "dstEscrowFactory": {
            "type": "string",
            "description": "Escrow factory contract address at destination chain"
          },
          "whitelist": {
            "description": "current executors whitelist addresses",
            "type": "array",
            "items": { "type": "string" }
          },
          "timeLocks": { "description": "Timing config", "allOf": [{ "$ref": "#/components/schemas/TimeLocks" }] },
          "srcSafetyDeposit": { "type": "string" },
          "dstSafetyDeposit": { "type": "string" },
          "recommendedPreset": {
            "type": "string",
            "description": "suggested preset",
            "enum": ["fast", "slow", "medium", "custom"]
          },
          "prices": { "$ref": "#/components/schemas/PairCurrency" },
          "volume": { "$ref": "#/components/schemas/PairCurrency" }
        },
        "required": [
          "quoteId",
          "srcTokenAmount",
          "dstTokenAmount",
          "presets",
          "srcEscrowFactory",
          "dstEscrowFactory",
          "whitelist",
          "timeLocks",
          "srcSafetyDeposit",
          "dstSafetyDeposit",
          "recommendedPreset",
          "prices",
          "volume"
        ]
      },
      "CustomPresetParams": { "type": "object", "properties": {} },
      "BuildOrderBody": {
        "type": "object",
        "properties": {
          "quote": {
            "description": "quote from /receive",
            "example": {
              "quoteId": "test_test_test",
              "srcTokenAmount": "100000000000000000",
              "dstTokenAmount": "250418225",
              "presets": {
                "fast": {
                  "bankFee": "0",
                  "auctionDuration": 100,
                  "startAuctionIn": 2,
                  "initialRateBump": 1000,
                  "auctionStartAmount": "250418225",
                  "startAmount": "250418225",
                  "auctionEndAmount": "250418225",
                  "exclusiveResolver": null,
                  "costInDstToken": "517184548685636",
                  "points": [{ "delay": 12, "rateBump": 455 }],
                  "allowPartialFills": false,
                  "allowMultipleFills": false,
                  "gasCost": { "gasBumpEstimate": 54, "gasPriceEstimate": "1231" }
                }
              },
              "timeLocks": {
                "srcWithdrawal": 20,
                "srcPublicWithdrawal": 21,
                "srcCancellation": 22,
                "srcPublicCancellation": 23,
                "dstWithdrawal": 24,
                "dstPublicWithdrawal": 25,
                "dstCancellation": 26
              },
              "srcEscrowFactory": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
              "dstEscrowFactory": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
              "srcSafetyDeposit": "123",
              "dstSafetyDeposit": "123",
              "whitelist": ["0x1d3b67bca8935cb510c8d18bd45f0b94f54a9681"],
              "pubKeys": [
                "0x0454d169b35a0061088d88c00f273f4a2ab603f45077abb2e404b94bff59238c5dfb7eb92ec442a8522ab88b471b7ba2fe9adc304a4ff1696d8afccd99e5e3531a"
              ],
              "secretsCount": 1,
              "recommendedPreset": "fast",
              "prices": { "usd": { "srcToken": "2505.44210175", "dstToken": "1.0008429148729692" } },
              "volume": { "usd": { "srcToken": "250.544210175", "dstToken": "250.62930624631504754367" } },
              "priceImpactPercent": 0,
              "autoK": 0.1,
              "k": 0.2,
              "mxK": 1
            },
            "allOf": [{ "$ref": "#/components/schemas/GetQuoteOutput" }]
          },
          "secretsHashList": {
            "type": "string",
            "description": "keccak256(secret)[]",
            "example": ["0x315b47a8c3780434b153667588db4ca628526e20000000000000000000000000"]
          }
        },
        "required": ["quote", "secretsHashList"]
      },
      "BuildOrderOutput": {
        "type": "object",
        "properties": {
          "typedData": { "type": "object", "description": "EIP712 Typed Data" },
          "orderHash": { "type": "string", "description": "Hash of CrossChain order" },
          "extension": { "type": "string", "description": "CrossChain order extension" }
        },
        "required": ["typedData", "orderHash", "extension"]
      }
    }
  }
}
